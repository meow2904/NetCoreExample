!function(y){"use strict";function v(t){return t}function c(t){return!b(t)&&t instanceof Object}function i(t,n,i){return w(t,function(t,e){return t[n].apply(t,i||[])})}var o,r,u,p,a,b=function(t){return y.isArray(t)},s=function(t,e){return y.inArray(e,t)},$=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n,t)},k=function(t){return t[t.length-1]},T=function(t){return Array.prototype.slice.call(t)},f=function(t,i){var r=[];return $(t,function(t,e,n){r.push(i(t,e,n))}),r},l=function(t,i,r){var u={};return $(t,function(t,e,n){e=r?r(e,t):e,u[e]=i(t,e,n)}),u},w=function(t,e,n){return b(t)?f(t,e):l(t,e,n)};function h(t){var e={};return(t=u(t,e)).getType=function(){return"button"},t.$().on("change",function(t){e.publishChange(t,this)}),t}function d(t){var e={},n=u(t,e);return n.getType=function(){return"checkbox"},n.get=function(){return 0!==n.$().filter(":checked").length&&"1"===n.$().filter(":checked")[0].value},n.set=function(t){n.$().prop("checked",t)},e.equalTo=a,n.$().change(function(t){e.publishChange(t,this)}),n}function m(t){return(t=p(t,{})).getType=function(){return"email"},t}function g(t){var e={},n=r(t,e);return n.getType=function(){return"file"},n.get=function(){return k(n.$().val().split("\\"))},n.clear=function(){this.$().each(function(){o(this).wrap("<form>").closest("form").get(0).reset(),o(this).unwrap()})},n.$().change(function(t){e.publishChange(t,this)}),n}function x(t){var e={};return(t=u(t,e)).getType=function(){return"hidden"},t.$().change(function(t){e.publishChange(t,this)}),t}function C(t){var e={},i=r(t,e);return i.getType=function(){return"file[multiple]"},i.get=function(){for(var t=i.$().get(0).files||[],e=[],n=0;n<(t.length||0);n+=1)e.push(t[n].name);return e},i.clear=function(){this.$().each(function(){o(this).wrap("<form>").closest("form").get(0).reset(),o(this).unwrap()})},i.$().change(function(t){e.publishChange(t,this)}),i}function V(t){var e={},n=u(t,e);return n.getType=function(){return"select[multiple]"},n.get=function(){return n.$().val()||[]},n.set=function(t){n.$().val(""===t?[]:b(t)?t:[t])},e.equalTo=a,n.$().change(function(t){e.publishChange(t,this)}),n}function A(t){return(t=p(t,{})).getType=function(){return"password"},t}function E(t){var e={},n=u(t,e);return n.getType=function(){return"radio"},n.get=function(){return n.$().filter(":checked").val()||null},n.set=function(t){t?n.$().filter('[value="'+t+'"]').prop("checked",!0):n.$().each(function(){o(this).prop("checked",!1)})},n.$().change(function(t){e.publishChange(t,this)}),n}function j(t){var e={};return(t=u(t,e)).getType=function(){return"range"},t.$().change(function(t){e.publishChange(t,this)}),t}function q(t){var e={};return(t=u(t,e)).getType=function(){return"select"},t.$().change(function(t){e.publishChange(t,this)}),t}function L(t){var e={};return(t=u(t,e)).getType=function(){return"textarea"},t.$().on("change keyup keydown",function(t){e.publishChange(t,this)}),t}function N(t){return(t=p(t,{})).getType=function(){return"url"},t}function O(t){return(t=p(t,{})).getType=function(){return"color"},t}function D(t){return(t=p(t,{})).getType=function(){return"date"},t}function I(t){return(t=p(t,{})).getType=function(){return"datetime-local"},t}function Q(t){return(t=p(t,{})).getType=function(){return"month"},t}function Z(t){return(t=p(t,{})).getType=function(){return"number"},t}function P(t){return(t=p(t,{})).getType=function(){return"search"},t}function R(t){return(t=p(t,{})).getType=function(){return"tel"},t}function S(t){return(t=p(t,{})).getType=function(){return"time"},t}function U(t){return(t=p(t,{})).getType=function(){return"week"},t}function F(t){function e(e,t){(c(t)?t:u.find(t)).each(function(){var t=o(this).attr("name");r[t]=a[e]({$:o(this)})})}function n(e,t){var n=[],i=c(t)?t:u.find(t);c(t)?r[i.attr("name")]=a[e]({$:i}):(i.each(function(){-1===s(n,o(this).attr("name"))&&n.push(o(this).attr("name"))}),$(n,function(t){r[t]=a[e]({$:u.find('input[name="'+t+'"]')})}))}var r={},u=t.$,a=t.constructorOverride||{color:O,date:D,datetimeLocal:I,month:Q,number:Z,search:P,tel:R,time:S,week:U,button:h,text:p,url:N,email:m,password:A,range:j,textarea:L,select:q,"select[multiple]":V,radio:E,checkbox:d,file:g,"file[multiple]":C,hidden:x};return u.is("input, select, textarea")?u.is('input[type="button"], button, input[type="submit"]')?e("button",u):u.is("textarea")?e("textarea",u):u.is('input[type="text"]')||u.is("input")&&!u.attr("type")?e("text",u):u.is('input[type="password"]')?e("password",u):u.is('input[type="email"]')?e("email",u):u.is('input[type="url"]')?e("url",u):u.is('input[type="color"]')?e("color",u):u.is('input[type="date"]')?e("date",u):u.is('input[type="datetime-local"]')?e("datetimeLocal",u):u.is('input[type="month"]')?e("month",u):u.is('input[type="number"]')?e("number",u):u.is('input[type="search"]')?e("search",u):u.is('input[type="tel"]')?e("tel",u):u.is('input[type="time"]')?e("time",u):u.is('input[type="week"]')?e("week",u):u.is('input[type="range"]')?e("range",u):u.is("select")?u.is("[multiple]")?e("select[multiple]",u):e("select",u):u.is('input[type="file"]')?u.is("[multiple]")?e("file[multiple]",u):e("file",u):u.is('input[type="hidden"]')?e("hidden",u):u.is('input[type="radio"]')?n("radio",u):u.is('input[type="checkbox"]')?n("checkbox",u):e("text",u):(e("button",'input[type="button"], button, input[type="submit"]'),e("text",'input[type="text"]'),e("color",'input[type="color"]'),e("date",'input[type="date"]'),e("datetimeLocal",'input[type="datetime-local"]'),e("month",'input[type="month"]'),e("number",'input[type="number"]'),e("search",'input[type="search"]'),e("tel",'input[type="tel"]'),e("time",'input[type="time"]'),e("week",'input[type="week"]'),e("password",'input[type="password"]'),e("email",'input[type="email"]'),e("url",'input[type="url"]'),e("range",'input[type="range"]'),e("textarea","textarea"),e("select","select:not([multiple])"),e("select[multiple]","select[multiple]"),e("file",'input[type="file"]:not([multiple])'),e("file[multiple]",'input[type="file"][multiple]'),e("hidden",'input[type="hidden"]'),n("radio",'input[type="radio"]'),n("checkbox",'input[type="checkbox"]')),r}o=jQuery,r=function(t,i){r={},(e=e||{}).publish=function(t,e){$(r[t],function(t){t(e)})},e.subscribe=function(t,e){r[t]=r[t]||[],r[t].push(e)},e.unsubscribe=function(n){$(r,function(t){var e=s(t,n);-1!==e&&t.splice(e,1)})};var e,r,u,a=e,n=t.$;return a.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},a.$=function(t){return t?n.find(t):n},a.disable=function(){a.$().prop("disabled",!0),a.publish("isEnabled",!1)},a.enable=function(){a.$().prop("disabled",!1),a.publish("isEnabled",!0)},i.equalTo=function(t,e){return t===e},i.publishChange=function(t,e){var n=a.get();i.equalTo(n,u)||a.publish("change",{e:t,domElement:e}),u=n},a},u=function(t,e){var i=r(t,e);return i.get=function(){if(0<i.$().length){var t,e,n;if(i.$()[0].className.includes("input-datetime"))return e=(t=i.$().val()).substring(0,10).split("/"),n=t.substring(11,16),new Date(e[2]+"-"+e[1]+"-"+e[0]+"T"+n+":00.000Z");if(i.$()[0].className.includes("input-date"))return e=(t=i.$().val()).substring(0,10).split("/"),new Date((e[2]+"-"+e[1]+"-"+e[0]+"T00:00:00.000Z")?.trim())}return i.$().val()},i.set=function(t){var e,n;0<i.$().length?i.$()[0].className.includes("input-datetime")?(e=t.substring(0,10).split("-"),n=t.substring(11,16),i.$().val(e[2]+"/"+e[1]+"/"+e[0]+" "+n)):i.$()[0].className.includes("input-date")?(e=t.substring(0,10).split("-"),n=t.substring(11,16),i.$().val(e[2]+"/"+e[1]+"/"+e[0])):i.$().val(t):i.$().val(t)},i.clear=function(){i.set("")},e.buildSetter=function(e){return function(t){e.call(i,t)}},i},p=function(t){var e={},t=u(t,e);return t.getType=function(){return"text"},t.$().on("change keyup keydown",function(t){e.publishChange(t,this)}),t},a=function(t,e){t=b(t)?t:[t],e=b(e)?e:[e];var n=!0;return t.length!==e.length?n=!1:$(t,function(t){-1===s(e,t)&&(n=!1)}),n},o.fn.inputVal=function(t){var e=o(this),n=F({$:e});return e.is("input, textarea, select")?void 0===t?n[e.attr("name")].get():(n[e.attr("name")].set(t),e):void 0===t?i(n,"get"):($(t,function(t,e){n[e].set(t)}),e)},o.fn.inputOnChange=function(e){var t=o(this),n=F({$:t});return $(n,function(t){t.subscribe("change",function(t){e.call(t.domElement,t.e)})}),t},o.fn.inputDisable=function(){var t=o(this);return i(F({$:t}),"disable"),t},o.fn.inputEnable=function(){var t=o(this);return i(F({$:t}),"enable"),t},o.fn.inputClear=function(){var t=o(this);return i(F({$:t}),"clear"),t},y.fn.repeaterVal=function(){var t,i,r=function(t){if(1===t.length&&(0===t[0].key.length||1===t[0].key.length&&!t[0].key[0]))return t[0].val;$(t,function(t){t.head=t.key.shift()});e={},$(t,function(t){e[t.head]||(e[t.head]=[]),e[t.head].push(t)});var e,n,i=e;return/^[0-9]+$/.test(t[0].head)?(n=[],$(i,function(t){n.push(r(t))})):(n={},$(i,function(t,e){n[e]=r(t)})),n};return r((t=y(this).inputVal(),i=[],$(t,function(t,e){var n=[];"undefined"!==e&&(n.push(e.match(/^[^\[]*/)[0]),n=n.concat(w(e.match(/\[[^\]]*\]/g),function(t){return t.replace(/[\[\]]/g,"")})),i.push({val:t,key:n}))}),i))},y.fn.repeater=function(m){var g;return m=m||{},y(this).each(function(){var t=y(this),n=m.show||function(){y(this).show()},i=m.hide||function(t){t()},a=t.find("[data-repeater-list]").first(),c=function(t,n){return t.filter(function(){return!n||0===y(this).closest((e="selector",w(n,function(t){return t[e]}).join(","))).length;var e})},r=function(){return c(a.find("[data-repeater-item]"),m.repeaters)},u=a.find("[data-repeater-item]").first().clone().hide(),e=c(c(y(this).find("[data-repeater-item]"),m.repeaters).first().find("[data-repeater-delete]"),m.repeaters),o=(m.isFirstItemUndeletable&&e&&e.remove(),function(){var t=a.data("repeater-list");return m.$parent?m.$parent.data("item-name")+"["+t+"]":t}),p=function(t){m.repeaters&&t.each(function(){var e=y(this);$(m.repeaters,function(t){e.find(t.selector).repeater(function(){var n={};return $(T(arguments),function(t){$(t,function(t,e){n[e]=t})}),n}(t,{$parent:e}))})})},s=function(t,e,n){t&&$(t,function(t){n.call(e.find(t.selector)[0],t)})},f=function(t,r,u){t.each(function(n){var i=y(this);i.data("item-name",r+"["+n+"]"),c(i.find("[name]"),u).each(function(){var t=y(this),e=t.attr("name").match(/\[[^\]]+\]/g),e=e?k(e).replace(/\[|\]/g,""):t.attr("name"),e=r+"["+n+"]["+e+"]"+(t.attr("multiple")?"[]":"");t.attr("name",e),s(u,i,function(t){var e=y(this);f(c(e.find("[data-repeater-item]"),t.repeaters||[]),r+"["+n+"]["+e.find("[data-repeater-list]").first().data("repeater-list")+"]",t.repeaters)})})}),a.find("input[name][checked]").removeAttr("checked").prop("checked",!0)},l=(f(r(),o(),m.repeaters),p(r()),m.initEmpty&&r().remove(),m.ready&&m.ready(function(){f(r(),o(),m.repeaters)}),function(t,e){a.append(t),f(r(),o(),m.repeaters),t.find("[name]").each(function(){y(this).inputClear()}),h(t,e||m.defaultValues,m.repeaters)});function h(t,e,n){var i,r,u,a;(e||m.defaultValues)&&(i={},c(t.find("[name]"),n).each(function(){var t=y(this).attr("name").match(/\[([^\]]*)(\]|\]\[\])$/)[1];i[t]=y(this).attr("name")}),t.inputVal(w((r=e||m.defaultValues,u=function(t,e){return i[e]},b(r)?(a=[],$(r,function(t,e,n){u(t,e,n)&&a.push(t)})):(a={},$(r,function(t,e,n){u(t,e,n)&&(a[e]=t)})),a),v,function(t){return i[t]}))),s(n,t,function(i){var r=y(this);c(r.find("[data-repeater-item]"),i.repeaters).each(function(){var n,t=r.find("[data-repeater-list]").data("repeater-list");e&&e[t]?(n=y(this).clone(),r.find("[data-repeater-item]").remove(),$(e[t],function(t){var e=n.clone();h(e,t,i.repeaters||[]),r.find("[data-repeater-list]").append(e)})):h(y(this),i.defaultValues,i.repeaters||[])})})}var d=function(t){var e=u.clone();l(e,t),m.repeaters&&p(e),n.call(e.get(0))};g=function(t,e){r().remove(),$(t,d),e(o())},c(t.find("[data-repeater-create]"),m.repeaters).click(function(){var t=a.find("[data-repeater-item]").length-1;m.validateAdd(t,o())&&(d(),m.loadAdd(t,o()))}),a.on("click","[data-repeater-delete]",function(){var t=y(this).closest("[data-repeater-item]").get(0),e=t.sectionRowIndex;i.call(t,function(){m.removeItem(e,o())&&(y(t).remove(),f(r(),o(),m.repeaters))})})}),this.setList=g,this}}(jQuery);