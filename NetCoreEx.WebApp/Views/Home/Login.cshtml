@using Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "Đăng nhập hệ thống";
    Layout = "_LayoutForm";
}
<div class="d-flex flex-center p-15 shadow bg-body rounded w-100 w-md-500px mx-auto ms-xl-20">
    <form onsubmit="Login(event)" class="form w-100" novalidate="novalidate">
        <div class="text-center mb-10">
            <h1 class="text-dark mb-3">Đăng nhập hệ thống</h1>
            <div class="text-gray-400 fw-bold fs-4">
            </div>
        </div>

        <div class="col-lg-12 form-control form-control-floating card mb-7" style="padding-right: 0;">
            <input placeholder="none" type="text" class="form-input" id="txtUserName" autocomplete="off">
            <label class="form-label" for="txtUserName">Tên đăng nhập</label>
        </div>

        <div class="mb-7 fv-row" data-kt-password-meter="true">
            <div class="mb-1">
                <div class="position-relative mb-3 form-control-floating form-control" style="padding-right: 0">
                    <input class="form-input" type="password" placeholder="none" autocomplete="off" id="txtPassword">
                    <label class="form-label" for="txtPassword">Mật khẩu</label>
                    <span class="btn btn-sm btn-icon position-absolute translate-middle top-50 end-0 me-n2" data-kt-password-meter-control="visibility" style="padding-bottom: 10px;">
                        <i class="bi bi-eye-slash fs-2"></i>
                        <i class="bi bi-eye fs-2 d-none"></i>
                    </span>
                </div>
            </div>
        </div>

        <div class="fv-row mb-10">
            <label class="form-check form-check-custom form-check-solid form-check-inline mb-5">
                <input class="form-check-input" type="checkbox" name="toc" value="1" checked="checked" />
                <span class="form-check-label fw-bold text-gray-700">
                    Ghi nhớ tài khoản
                </span>
            </label>
        </div>
        <div class="text-center pb-lg-0 pb-8 w-100">
            <button type="submit" id="kt_free_trial_submit" class="btn btn-lg btn-primary fw-bolder w-100">
                <span class="indicator-label">Đăng nhập</span>
                <span class="indicator-progress" id="LoadProgress">
                    ...
                    <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                </span>
            </button>
        </div>
    </form>
</div>
<script type="text/javascript">
    function Login(event) {
        event.preventDefault();
        var returnUrl = "@ViewData["ReturnURL"]";
        if (!Validate()) return;
        window.objAjax.parameters = {
            UserName: $("#txtUserName").val().trim(),
            Password: $("#txtPassword").val().trim()
        };
        window.objAjax.divLoading = "body";
        window.objAjax.isFuntConfirm = true;
        AjaxPostAsync("/Api/AppUser/Login",
            window.objAjax,
            function() {
                if (returnUrl === "")
                    window.location.href = "/";
                else
                    window.location.href = returnUrl;
            });
    }
    function Validate() {
        if ($("#txtUserName").val() === '') {
            SwalNotifyWarning("Bạn chưa nhập Tên đăng nhập");
            return false;
        }
        if ($("#txtPassword").val() === '') {
            SwalNotifyWarning("Bạn chưa nhập Mật khẩu");
            return false;
        }
        return true;
    }
</script>